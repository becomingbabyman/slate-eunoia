{"version":3,"file":"cljss.core.js","sources":["cljss/core.cljs"],"mappings":"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","names":["cljss.core/sheets","cljs.core.atom.cljs$core$IFn$_invoke$arity$1","cljs.core/List","cljss.sheet/create-sheet","cljss.core/remove-styles!","cljs.core/deref","cljs.core/run!","cljss.sheet/flush!","cljs.core/reset!","cljss.core/css","cls","static","vars","sheet","cljs.core/first","cljss.sheet/filled?","cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$3","cljs.core/conj","G__26095","vec__26096","seq__26097","cljs.core/seq","first__26098","cljs.core/next","vec__26099","seq__26100","first__26101","s","idx","cljss.sheet/insert!","cljs.core/empty?","cljs.core/count","var-cls","cljs.core/hash","cljss.utils/build-css","cljss.core/css-keyframes","inner","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","p__26122","vec__26123","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","id","val","clojure.string/replace","anim-name","keyframes","cljss.core/-camel-case","k","cljs.core/Keyword","cljs.core/Symbol","vec__26126","seq__26127","first__26128","first-word","words","clojure.string.split.cljs$core$IFn$_invoke$arity$2","cljs.core/name","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","cljs.core.map.cljs$core$IFn$_invoke$arity$2","clojure.string/capitalize","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","clojure.string.join.cljs$core$IFn$_invoke$arity$1","cljs.core.keyword.cljs$core$IFn$_invoke$arity$1","cljss.core/-compile-class-name","props","className","cljs.core/select-keys","cljs.core/vals","cljs.core.filter.cljs$core$IFn$_invoke$arity$2","cljs.core/identity","clojure.string.join.cljs$core$IFn$_invoke$arity$2","cljss.core/-mk-var-class","p__26130","vec__26131","v","and__3938__auto__","cljs.core/ifn?","cljs.core/PROTOCOL_SENTINEL","cljs.core/native-satisfies?","cljs.core/IWithMeta","cljs.core/meta","cljs.core/flatten","p1__26129#","cljs.core.get.cljs$core$IFn$_invoke$arity$3","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljss.core/-meta-attrs","cljs.core/second","p1__26136#","cljs.core/set","cljss.core/-camel-case-attrs","cljs.core/reduce-kv","m","G__26138","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","cljss.core/-styled","attrs","create-element","clsn","cljs.core.gensym.cljs$core$IFn$_invoke$arity$0","cljss.utils/dev?","p1__26140#","p__26141","vec__26142","children","vec__26145","cljs.core/map?","cljs.core.apply.cljs$core$IFn$_invoke$arity$3","cljs.core/array","var-class","meta-attrs","cljs.core/dissoc","cljs.core.concat.cljs$core$IFn$_invoke$arity$variadic"],"sourcesContent":["(ns cljss.core\n  (:require [cljss.sheet :refer [create-sheet insert! filled? flush!]]\n            [cljss.utils :refer [build-css dev?]]\n            [clojure.string :as cstr]))\n\n(def ^:private sheets (atom (list (create-sheet))))\n\n(defn remove-styles! []\n  (run! flush! @sheets)\n  (reset! sheets (list (create-sheet))))\n\n(defn css\n  \"Takes class name, static styles and dynamic styles.\n   Injects styles and returns a string of generated class names.\"\n  [cls static vars]\n  (let [static (if (string? static) [static] static)\n        sheet (first @sheets)]\n    (if (filled? sheet)\n      (do\n        (swap! sheets conj (create-sheet))\n        (css cls static vars))\n      (do\n        (loop [[s & static] static\n               idx 0]\n          (let [cls (str cls \"-\" idx)]\n            (insert! sheet s cls)\n            (when-not (empty? static)\n              (recur static (inc idx)))))\n        (if (pos? (count vars))\n          (let [var-cls (str \"vars-\" (hash vars))]\n            (insert! sheet #(build-css var-cls vars) var-cls)\n            (str cls \" \" var-cls))\n          cls)))))\n\n(defn css-keyframes\n  \"Takes CSS animation name, static styles and dynamic styles.\n   Injects styles and returns generated CSS animation name.\"\n  [cls static vars]\n  (let [sheet (first @sheets)]\n    (if (filled? sheet)\n      (do\n        (swap! sheets conj (create-sheet))\n        (css-keyframes cls static vars))\n      (let [inner\n            (reduce\n              (fn [s [id val]] (cstr/replace s id val))\n              static\n              vars)\n            anim-name (str \"animation-\" cls \"-\" (hash vars))\n            keyframes (str \"@keyframes \" anim-name \"{\" inner \"}\")]\n        (insert! sheet keyframes anim-name)\n        anim-name))))\n\n;; ==============================\n(defn -camel-case [k]\n  (if (or (keyword? k)\n          (string? k)\n          (symbol? k))\n    (let [[first-word & words] (cstr/split (name k) #\"-\")]\n      (if (or (empty? words)\n              (= \"aria\" first-word)\n              (= \"data\" first-word))\n        k\n        (-> (map cstr/capitalize words)\n            (conj first-word)\n            cstr/join\n            keyword)))\n    k))\n\n(defn -compile-class-name [props]\n  (let [className\n        (-> props\n            (select-keys [:className :class :class-name])\n            vals\n            (->> (filter identity)))]\n    (when-not (empty? className)\n      (str (clojure.string/join \" \" className) \" \"))))\n\n(defn -mk-var-class [props vars cls static]\n  (->> vars\n       (map (fn [[cls v]]\n              (cond\n                (and (ifn? v) (satisfies? IWithMeta v))\n                (->> v meta list flatten (map #(get props % nil)) (apply v) (list cls))\n\n                (ifn? v)\n                (list cls (v props))\n\n                :else (list cls v))))\n       (css cls static)))\n\n(defn -meta-attrs [vars]\n  (->> vars\n       (map second)\n       (filter #(satisfies? IWithMeta %))\n       (map meta)\n       flatten\n       set))\n\n(defn -camel-case-attrs [props]\n  (reduce-kv\n    (fn [m k v]\n      (let [k (case k\n                :for :htmlFor\n                (-camel-case k))]\n        (assoc m k v)))\n    {}\n    props))\n\n(defn -styled [cls static vars attrs create-element]\n  (let [clsn (str cls \"-\" (gensym))\n        static (if ^boolean dev?\n                 (map #(cstr/replace % cls clsn) static)\n                 static)\n        vars (if ^boolean dev?\n               (->> vars (map (fn [[k v]] [(cstr/replace k cls clsn) v])))\n               vars)\n        cls (if ^boolean dev? clsn cls)]\n    (fn [props & children]\n      (let [[props children] (if (map? props)\n                               (array props children)\n                               (array {} (apply array props children)))\n            var-class (-mk-var-class props vars cls static)\n            meta-attrs (-meta-attrs vars)\n            className (str (-compile-class-name props) var-class)\n            props (-> (apply dissoc props (concat attrs meta-attrs [:class :class-name :className]))\n                      (assoc :className className)\n                      -camel-case-attrs)]\n        (create-element props children)))))\n"]}