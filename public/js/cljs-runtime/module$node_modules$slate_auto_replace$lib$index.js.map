{
"version":3,
"file":"module$node_modules$slate_auto_replace$lib$index.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/slate-auto-replace/lib/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$slate_auto_replace$lib$index\"] = function(global,process,require,module,exports,shadow$shims) {\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isHotkey = require('is-hotkey');\n\nvar _isHotkey2 = _interopRequireDefault(_isHotkey);\n\nvar _typeOf = require('type-of');\n\nvar _typeOf2 = _interopRequireDefault(_typeOf);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * A Slate plugin to automatically replace a block when a string of matching\n * text is typed.\n *\n * @param {Object} opts\n * @return {Object}\n */\n\nfunction AutoReplace() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var transform = opts.transform;\n\n  var trigger = normalizeTrigger(opts.trigger);\n  var ignoreIn = void 0;\n  var onlyIn = void 0;\n\n  if (opts.ignoreIn) ignoreIn = normalizeMatcher(opts.ignoreIn);\n  if (opts.onlyIn) onlyIn = normalizeMatcher(opts.onlyIn);\n\n  if (!transform) throw new Error('You must provide a `transform` option.');\n  if (!trigger) throw new Error('You must provide a `trigger` option.');\n\n  /**\n   * On key down.\n   *\n   * @param {Event} event\n   * @param {Change} change\n   * @param {Editor} editor\n   * @return {Value}\n   */\n\n  function onKeyDown(event, change, editor) {\n    if (trigger(event)) {\n      return replace(event, change, editor);\n    }\n  }\n\n  /**\n   * Replace a block's properties.\n   *\n   * @param {Event} event\n   * @param {Change} change\n   * @param {Editor} editor\n   * @return {Value}\n   */\n\n  function replace(event, change, editor) {\n    var value = change.value;\n\n    if (value.isExpanded) return;\n\n    var startBlock = value.startBlock;\n\n    if (!startBlock) return;\n\n    var type = startBlock.type;\n    if (onlyIn && !onlyIn(type)) return;\n    if (ignoreIn && ignoreIn(type)) return;\n\n    var matches = getMatches(value);\n    if (!matches) return;\n\n    event.preventDefault();\n\n    var startOffset = value.startOffset;\n    var totalRemoved = 0;\n    var offsets = getOffsets(matches, startOffset);\n\n    offsets.forEach(function (offset) {\n      change.moveOffsetsTo(offset.start, offset.end).delete();\n      totalRemoved += offset.total;\n    });\n\n    startOffset -= totalRemoved;\n    change.moveOffsetsTo(startOffset, startOffset);\n\n    return change.call(transform, event, matches, editor);\n  }\n\n  /**\n   * Try to match the current text of a `value` with the `before` and\n   * `after` regexes.\n   *\n   * @param {Value} value\n   * @return {Object}\n   */\n\n  function getMatches(value) {\n    var startText = value.startText,\n        startOffset = value.startOffset;\n    var text = startText.text;\n\n    var after = null;\n    var before = null;\n\n    if (opts.after) {\n      var string = text.slice(startOffset);\n      after = string.match(opts.after);\n    }\n\n    if (opts.before) {\n      var _string = text.slice(0, startOffset);\n      before = _string.match(opts.before);\n    }\n\n    // If both sides, require that both are matched, otherwise null.\n    if (opts.before && opts.after && !before) after = null;\n    if (opts.before && opts.after && !after) before = null;\n\n    // Return null unless we have a match.\n    if (!before && !after) return null;\n\n    if (after) after[0] = after[0].replace(/\\s+$/, '');\n    if (before) before[0] = before[0].replace(/^\\s+/, '');\n\n    return { before: before, after: after };\n  }\n\n  /**\n   * Return the offsets for `matches` with `start` offset.\n   *\n   * @param {Object} matches\n   * @param {Number} start\n   * @return {Object}\n   */\n\n  function getOffsets(matches, start) {\n    var before = matches.before,\n        after = matches.after;\n\n    var offsets = [];\n    var totalRemoved = 0;\n\n    if (before) {\n      var match = before[0];\n      var startOffset = 0;\n      var matchIndex = 0;\n\n      before.slice(1, before.length).forEach(function (current) {\n        if (current === undefined) return;\n\n        matchIndex = match.indexOf(current, matchIndex);\n        startOffset = start - totalRemoved + matchIndex - match.length;\n\n        offsets.push({\n          start: startOffset,\n          end: startOffset + current.length,\n          total: current.length\n        });\n\n        totalRemoved += current.length;\n        matchIndex += current.length;\n      });\n    }\n\n    if (after) {\n      var _match = after[0];\n      var _startOffset = 0;\n      var _matchIndex = 0;\n\n      after.slice(1, after.length).forEach(function (current) {\n        if (current === undefined) return;\n\n        _matchIndex = _match.indexOf(current, _matchIndex);\n        _startOffset = start - totalRemoved + _matchIndex;\n\n        offsets.push({\n          start: _startOffset,\n          end: _startOffset + current.length,\n          total: 0\n        });\n\n        totalRemoved += current.length;\n        _matchIndex += current.length;\n      });\n    }\n\n    return offsets;\n  }\n\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n  return { onKeyDown: onKeyDown };\n}\n\n/**\n * Normalize a `trigger` option to a matching function.\n *\n * @param {Mixed} trigger\n * @return {Function}\n */\n\nfunction normalizeTrigger(trigger) {\n  switch ((0, _typeOf2.default)(trigger)) {\n    case 'function':\n      return trigger;\n    case 'regexp':\n      return function (event) {\n        return !!(event.key && event.key.match(trigger));\n      };\n    case 'string':\n      return (0, _isHotkey2.default)(trigger);\n  }\n}\n\n/**\n * Normalize a node matching plugin option.\n *\n * @param {Function|Array|String} matchIn\n * @return {Function}\n */\n\nfunction normalizeMatcher(matcher) {\n  switch ((0, _typeOf2.default)(matcher)) {\n    case 'function':\n      return matcher;\n    case 'array':\n      return function (node) {\n        return matcher.includes(node);\n      };\n    case 'string':\n      return function (node) {\n        return node == matcher;\n      };\n  }\n}\n\n/**\n * Export.\n *\n * @type {Function}\n */\n\nexports.default = AutoReplace;\n};"],
"names":["shadow$provide","global","process","require","module","exports","shadow$shims","normalizeTrigger","trigger","_typeOf2","default","event","key","match","_isHotkey2","normalizeMatcher","matcher","node","includes","Object","defineProperty","value","_isHotkey","__esModule","_typeOf","AutoReplace","replace","change","editor","isExpanded","startBlock","type","onlyIn","ignoreIn","matches","getMatches","preventDefault","startOffset","totalRemoved","getOffsets","offsets","forEach","offset","moveOffsetsTo","start","end","delete","total","call","transform","text","startText","after","before","opts","slice","string","_string","matchIndex","length","current","undefined","indexOf","push","_match","_startOffset","_matchIndex","arguments","Error","onKeyDown"]
}
