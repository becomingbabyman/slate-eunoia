shadow$provide.module$node_modules$slate_react$lib$slate_react=function(global,process,require,module,exports,shadow$shims){function _interopDefault(ex){return ex&&"object"===typeof ex&&"default"in ex?ex["default"]:ex}function getChildrenDecorations(node,decorations){var activeDecorations=immutable.Set().asMutable(),childrenDecorations=[];orderChildDecorations(node,decorations).forEach(function(item){item.isRangeStart?activeDecorations.add(item.decoration):item.isRangeEnd?activeDecorations.remove(item.decoration):
childrenDecorations.push(activeDecorations.toList())});return childrenDecorations}function orderChildDecorations(node,decorations){if(decorations.isEmpty())return node.nodes.toArray().map(function(child,index){return{child:child,index:index}});var keyOrders=defineProperty({},node.key,0),globalOrder=1;node.forEachDescendant(function(child){keyOrders[child.key]=globalOrder;globalOrder+=1});var childNodes=node.nodes.toArray(),endPoints=childNodes.map(function(child,index){return{child:child,index:index,
order:keyOrders[child.key]}});decorations.forEach(function(decoration){var startKeyOrder=keyOrders[decoration.startKey];startKeyOrder=void 0===startKeyOrder?0:getContainingChildOrder(childNodes,keyOrders,startKeyOrder);endPoints.push({isRangeStart:!0,order:startKeyOrder-.5,decoration:decoration});endPoints.push({isRangeEnd:!0,order:(keyOrders[decoration.endKey]||globalOrder)+.5,decoration:decoration})});return endPoints.sort(function(a,b){return a.order>b.order?1:-1})}function getContainingChildOrder(children,
keyOrders,order){var nextChildIndex=children.findIndex(function(child){return order<keyOrders[child.key]});return 0>=nextChildIndex?0:keyOrders[children[nextChildIndex-1].key]}function findDOMNode(key){var win=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;slate.Node.isNode(key)&&(key=key.key);win=win.document.querySelector('[data-key\x3d"'+key+'"]');if(!win)throw Error('Unable to find a DOM node for "'+key+'". This is often because of forgetting to add `props.attributes` to a custom component.');
return win}function findDOMPoint(key,offset){var win=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,el=findDOMNode(key,win),start=0,n=void 0;for(win=win.document.createNodeIterator(el,NodeFilter.SHOW_TEXT,function(){return NodeFilter.FILTER_ACCEPT},!1);n=win.nextNode();){el=start+n.textContent.length;if(offset<=el)return start=offset-start,{node:n,offset:0<=start?start:0};start=el}return null}function findDOMRange(range){var win=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
window,focusKey=range.focusKey,focusOffset=range.focusOffset,isBackward$$1=range.isBackward,isCollapsed=range.isCollapsed,anchor=findDOMPoint(range.anchorKey,range.anchorOffset,win);focusKey=isCollapsed?anchor:findDOMPoint(focusKey,focusOffset,win);if(!anchor||!focusKey)return null;win=win.document.createRange();focusOffset=isBackward$$1?focusKey:anchor;isBackward$$1=isBackward$$1?anchor:focusKey;win.setStart(focusOffset.node,focusOffset.offset);win.setEnd(isBackward$$1.node,isBackward$$1.offset);
return win}function findPoint(nativeNode,nativeOffset,value){var JSCompiler_object_inline_node_1129=nativeNode;if(1==JSCompiler_object_inline_node_1129.nodeType&&JSCompiler_object_inline_node_1129.childNodes.length){var isLast=nativeOffset==JSCompiler_object_inline_node_1129.childNodes.length,direction=isLast?"backward":"forward";for(JSCompiler_object_inline_node_1129=getEditableChild(JSCompiler_object_inline_node_1129,isLast?nativeOffset-1:nativeOffset,direction);1==JSCompiler_object_inline_node_1129.nodeType&&
JSCompiler_object_inline_node_1129.childNodes.length;)JSCompiler_object_inline_node_1129=getEditableChild(JSCompiler_object_inline_node_1129,isLast?JSCompiler_object_inline_node_1129.childNodes.length-1:0,direction);nativeOffset=isLast?JSCompiler_object_inline_node_1129.textContent.length:0}isLast=nativeOffset;direction=getWindow(nativeNode);nativeNode=JSCompiler_object_inline_node_1129.parentNode;if(nativeOffset=nativeNode.closest("[data-offset-key]")){direction=direction.document.createRange();
var textNode=nativeOffset.closest("[data-key]");direction.setStart(textNode,0);direction.setEnd(JSCompiler_object_inline_node_1129,isLast);isLast=textNode;JSCompiler_object_inline_node_1129=direction.toString().length}else{JSCompiler_object_inline_node_1129=nativeNode.closest("[data-slate-void]");if(!JSCompiler_object_inline_node_1129)return null;nativeOffset=JSCompiler_object_inline_node_1129.querySelector("[data-offset-key]");if(!nativeOffset)return null;isLast=nativeOffset;JSCompiler_object_inline_node_1129=
isLast.textContent.length}JSCompiler_object_inline_node_1129==isLast.textContent.length&&nativeNode.hasAttribute("data-slate-zero-width")&&JSCompiler_object_inline_node_1129--;nativeNode=nativeOffset.getAttribute("data-offset-key");if(!nativeNode)return null;nativeNode=OffsetKey.parse(nativeNode).key;return value.document.hasDescendant(nativeNode)?{key:nativeNode,offset:JSCompiler_object_inline_node_1129}:null}function getEditableChild(parent,index,direction){parent=parent.childNodes;for(var child=
parent[index],i=index,triedForward=!1,triedBackward=!1;(8==child.nodeType||1==child.nodeType&&0==child.childNodes.length||1==child.nodeType&&"false"==child.getAttribute("contenteditable"))&&(!triedForward||!triedBackward);)i>=parent.length?(triedForward=!0,i=index-1,direction="backward"):0>i?(triedBackward=!0,i=index+1,direction="forward"):(child=parent[i],"forward"==direction&&i++,"backward"==direction&&i--);return child||null}function findRange(native,value){var el=native.anchorNode||native.startContainer;
if(!el)return null;el=getWindow(el);if(native instanceof el.Range||el.StaticRange&&native instanceof el.StaticRange)native={anchorNode:native.startContainer,anchorOffset:native.startOffset,focusNode:native.endContainer,focusOffset:native.endOffset};var _native=native,focusNode=_native.focusNode,focusOffset=_native.focusOffset;el=_native.isCollapsed;_native=findPoint(_native.anchorNode,_native.anchorOffset,value);value=el?_native:findPoint(focusNode,focusOffset,value);if(!_native||!value)return null;
if(slateDevEnvironment.IS_IE||slateDevEnvironment.IS_EDGE)native=findDOMPoint(_native.key,_native.offset),focusNode=findDOMPoint(value.key,value.offset),native={anchorNode:native.node,anchorOffset:native.offset,focusNode:focusNode.node,focusOffset:focusNode.offset};return slate.Range.create({anchorKey:_native.key,anchorOffset:_native.offset,focusKey:value.key,focusOffset:value.offset,isBackward:el?!1:isBackward(native),isFocused:!0})}function scrollToSelection(selection){if(!IS_IOS_11&&selection.anchorNode){var window=
getWindow(selection.anchorNode);var scroller=selection.anchorNode.parentNode;for(var scroller$jscomp$0=void 0;!scroller$jscomp$0&&scroller.parentNode;){var overflowY=window.getComputedStyle(scroller).overflowY;if(OVERFLOWS.includes(overflowY)){scroller$jscomp$0=scroller;break}scroller=scroller.parentNode}scroller=scroller$jscomp$0?scroller$jscomp$0:window.document.body;scroller$jscomp$0=scroller==window.document.body||scroller==window.document.documentElement;overflowY=isBackward(selection);var range=
selection.getRangeAt(0).cloneRange();range.collapse(overflowY);selection=range.getBoundingClientRect();slateDevEnvironment.IS_SAFARI&&range.collapsed&&0==selection.top&&0==selection.height&&(0==range.startOffset?range.setEnd(range.endContainer,1):range.setStart(range.startContainer,range.startOffset-1),selection=range.getBoundingClientRect(),0==selection.top&&0==selection.height&&range.getClientRects().length&&(selection=range.getClientRects()[0]));var scrollerTop=0,scrollerLeft=0,scrollerBordersY=
0,scrollerBordersX=0,scrollerPaddingTop=0,scrollerPaddingBottom=0,scrollerPaddingLeft=0,scrollerPaddingRight=0;if(scroller$jscomp$0){range=window.innerHeight;var yOffset=window.pageYOffset;var xOffset=window.pageXOffset;overflowY=window.innerWidth}else{overflowY=scroller.offsetWidth;range=scroller.offsetHeight;yOffset=scroller.scrollTop;xOffset=scroller.scrollLeft;scrollerTop=window.getComputedStyle(scroller);scrollerBordersY=scrollerTop.borderTopWidth;var borderBottomWidth=scrollerTop.borderBottomWidth;
scrollerBordersX=scrollerTop.borderLeftWidth;var borderRightWidth=scrollerTop.borderRightWidth;scrollerPaddingTop=scrollerTop.paddingTop;scrollerPaddingBottom=scrollerTop.paddingBottom;scrollerPaddingLeft=scrollerTop.paddingLeft;scrollerPaddingRight=scrollerTop.paddingRight;scrollerLeft=scroller.getBoundingClientRect();scrollerTop=scrollerLeft.top+parseInt(scrollerBordersY,10);scrollerLeft=scrollerLeft.left+parseInt(scrollerBordersX,10);scrollerBordersY=parseInt(scrollerBordersY,10)+parseInt(borderBottomWidth,
10);scrollerBordersX=parseInt(scrollerBordersX,10)+parseInt(borderRightWidth,10);scrollerPaddingTop=parseInt(scrollerPaddingTop,10);scrollerPaddingBottom=parseInt(scrollerPaddingBottom,10);scrollerPaddingLeft=parseInt(scrollerPaddingLeft,10);scrollerPaddingRight=parseInt(scrollerPaddingRight,10)}scrollerTop=selection.top+yOffset-scrollerTop;scrollerLeft=selection.left+xOffset-scrollerLeft;borderRightWidth=xOffset;borderBottomWidth=yOffset;scrollerLeft<xOffset?borderRightWidth=scrollerLeft-scrollerPaddingLeft:
scrollerLeft+selection.width+scrollerBordersX>xOffset+overflowY&&(borderRightWidth=scrollerLeft+scrollerBordersX+scrollerPaddingRight-overflowY);scrollerTop<yOffset?borderBottomWidth=scrollerTop-scrollerPaddingTop:scrollerTop+selection.height+scrollerBordersY>yOffset+range&&(borderBottomWidth=scrollerTop+scrollerBordersY+scrollerPaddingBottom+selection.height-range);scroller$jscomp$0?window.scrollTo(borderRightWidth,borderBottomWidth):(scroller.scrollTop=borderBottomWidth,scroller.scrollLeft=borderRightWidth)}}
function removeAllRanges(selection){var doc=window.document;doc&&doc.body.createTextRange?(selection=doc.body.createTextRange(),selection.collapse(),selection.select()):selection.removeAllRanges()}function cloneFragment(event,value){var fragment=2<arguments.length&&void 0!==arguments[2]?arguments[2]:value.fragment,window=getWindow(event.target),native=window.getSelection(),endKey=value.endKey,startVoid=value.document.getClosestVoid(value.startKey);endKey=value.document.getClosestVoid(endKey);if(!native.isCollapsed||
startVoid){fragment=Base64.serializeNode(fragment);var range=native.getRangeAt(0),contents=range.cloneContents(),attach=contents.childNodes[0];contents.childNodes.forEach(function(node){node.textContent&&""!==node.textContent.trim()&&(attach=node)});endKey&&(contents=range.cloneRange(),endKey=findDOMNode(endKey,window),contents.setEndAfter(endKey),contents=contents.cloneContents());startVoid&&(attach=contents.childNodes[0].childNodes[1].firstChild);[].slice.call(contents.querySelectorAll("[data-slate-zero-width]")).forEach(function(zw){var isNewline=
"n"===zw.getAttribute("data-slate-zero-width");zw.textContent=isNewline?"\n":""});3==attach.nodeType&&(startVoid=window.document.createElement("span"),startVoid.style.whiteSpace="pre",startVoid.appendChild(attach),contents.appendChild(startVoid),attach=startVoid);attach.setAttribute("data-slate-fragment",fragment);var div=window.document.createElement("div");div.appendChild(contents);if(event.clipboardData&&event.clipboardData.setData&&!slateDevEnvironment.IS_IE)event.preventDefault(),event.clipboardData.setData(TEXT,
div.textContent),event.clipboardData.setData(FRAGMENT,fragment),event.clipboardData.setData(HTML,div.innerHTML);else{var editor=event.target.closest("[data-slate-editor]");div.setAttribute("contenteditable",!0);div.style.position="absolute";div.style.left="-9999px";editor.appendChild(div);native.selectAllChildren(div);window.requestAnimationFrame(function(){editor.removeChild(div);removeAllRanges(native);native.addRange(range)})}}}function findNode(element,value){element=element.closest("[data-key]");
return element?(element=element.getAttribute("data-key"))?value.document.getNode(element)||null:null:null}function getEventRange(event,value){event.nativeEvent&&(event=event.nativeEvent);var x=event.x,y=event.y,target=event.target;if(null==x||null==y)return null;event=value.document;var node=findNode(target,value);if(!node)return null;if(node.isVoid)return value=target.getBoundingClientRect(),x="inline"==node.object?x-value.left<value.left+value.width-x:y-value.top<value.top+value.height-y,y=node.getFirstText(),
value=slate.Range.create(),x&&(x=event.getPreviousText(y.key))?value.moveToEndOf(x):(event=event.getNextText(y.key))?value.moveToStartOf(event):null;event=getWindow(target);node=void 0;if(event.document.caretRangeFromPoint)node=event.document.caretRangeFromPoint(x,y);else if(event.document.caretPositionFromPoint)x=event.document.caretPositionFromPoint(x,y),node=event.document.createRange(),node.setStart(x.offsetNode,x.offset),node.setEnd(x.offsetNode,x.offset);else if(event.document.body.createTextRange){node=
event.document.body.createTextRange();try{node.moveToPoint(x,y)}catch(error){return null}}return(value=findRange(node,value))?value:null}function getEventTransfer(event){!slateDevEnvironment.IS_IE&&event.nativeEvent&&(event=event.nativeEvent);event=event.dataTransfer||event.clipboardData;var fragment=getType(event,FRAGMENT$1),node=getType(event,NODE),html=getType(event,HTML$1),rich=getType(event,RICH),text=getType(event,TEXT$1),files=void 0;if(!fragment&&html&&~html.indexOf(' data-slate-fragment\x3d"')){var matches=
FRAGMENT_MATCHER.exec(html);(matches=slicedToArray(matches,2)[1])&&(fragment=matches)}text&&(matches=getEmbeddedTypes(text),matches[FRAGMENT$1]&&(fragment=matches[FRAGMENT$1]),matches[NODE]&&(node=matches[NODE]),matches[TEXT$1]&&(text=matches[TEXT$1]));fragment&&(fragment=Base64.deserializeNode(fragment));node&&(node=Base64.deserializeNode(node));try{event.items&&event.items.length?files=Array.from(event.items).map(function(item){return"file"==item.kind?item.getAsFile():null}).filter(function(exists){return exists}):
event.files&&event.files.length&&(files=Array.from(event.files))}catch(err){event.files&&event.files.length&&(files=Array.from(event.files))}event={files:files,fragment:fragment,html:html,node:node,rich:rich,text:text};event.type=event.fragment?"fragment":event.node?"node":event.rich&&event.html?"html":event.rich&&event.text?"text":event.files&&event.files.length?"files":event.html?"html":event.text?"text":"unknown";return event}function getEmbeddedTypes(text){if("SLATE-DATA-EMBED::"!=text.substring(0,
18))return{TEXT:text};try{return JSON.parse(text.substring(18))}catch(err){throw Error("Unable to parse custom Slate drag event data.");}}function getType(transfer,type){return transfer.types&&transfer.types.length?-1!==Array.from(transfer.types).indexOf(type)?transfer.getData(type)||null:null:type==TEXT$1?transfer.getData("Text")||null:null}function setEventTransfer(event,type,content){type=TRANSFER_TYPES[type.toUpperCase()];if(!type)throw Error('Cannot set unknown transfer type "'+type+'".');event.nativeEvent&&
(event=event.nativeEvent);event=event.dataTransfer||event.clipboardData;try{event.setData(type,content),event.setData("text",event.getData("text"))}catch(err){var text=event.getData(TEXT$2),obj={};if("SLATE-DATA-EMBED::"===text.substring(0,18))try{obj=JSON.parse(text.substring(18))}catch(e){throw Error("Failed to parse Slate data from `DataTransfer` object.");}else obj[TEXT$2]=text;obj[type]=content;content="SLATE-DATA-EMBED::"+JSON.stringify(obj);event.setData(TEXT$2,content)}}function AfterPlugin(){var isDraggingInternally=
null;return{onBeforeInput:function(event,change,editor){debug$5("onBeforeInput",{event:event});event.preventDefault();change.insertText(event.data)},onBlur:function(event,change,editor){debug$5("onBlur",{event:event});change.blur()},onClick:function(event,change,editor){if(editor.props.readOnly)return!0;var value=change.value;editor=value.document;(value=findNode(event.target,value))&&(value.isVoid||editor.hasVoidParent(value.key))&&change.focus().collapseToEndOf(value);debug$5("onClick",{event:event})},
onCopy:function(event,change,editor){debug$5("onCopy",{event:event});cloneFragment(event,change.value)},onCut:function(event,change,editor){debug$5("onCut",{event:event});cloneFragment(event,change.value);getWindow(event.target).requestAnimationFrame(function(){var value=change.value,endBlock=value.endBlock,endInline=value.endInline;value=value.isCollapsed;var isVoidInline=endInline&&endInline.isVoid&&value;endBlock&&endBlock.isVoid&&value?editor.change(function(c){return c.removeNodeByKey(endBlock.key)}):
isVoidInline?editor.change(function(c){return c.removeNodeByKey(endInline.key)}):editor.change(function(c){return c.delete()})})},onDragEnd:function(event,change,editor){debug$5("onDragEnd",{event:event});isDraggingInternally=null},onDragOver:function(event,change,editor){debug$5("onDragOver",{event:event})},onDragStart:function(event,change,editor){debug$5("onDragStart",{event:event});isDraggingInternally=!0;change=change.value;editor=change.document;var node=findNode(event.target,change);node&&
(node.isVoid||editor.hasVoidParent(node.key))?(change=Base64.serializeNode(node,{preserveKeys:!0}),setEventTransfer(event,"node",change)):(change=Base64.serializeNode(change.fragment),setEventTransfer(event,"fragment",change))},onDrop:function(event,change,editor){debug$5("onDrop",{event:event});var value=change.value,document=value.document,selection=value.selection;editor=getWindow(event.target);if(value=getEventRange(event,value)){var transfer=getEventTransfer(event);event=transfer.type;var fragment=
transfer.fragment,node=transfer.node;transfer=transfer.text;change.focus();isDraggingInternally&&selection.endKey==value.endKey&&selection.endOffset<value.endOffset&&(value=value.move(selection.startKey==selection.endKey?0-selection.endOffset+selection.startOffset:0-selection.endOffset));isDraggingInternally&&change.delete();change.select(value);if("text"==event||"html"==event){var anchorKey=value.anchorKey;if(selection=document.hasVoidParent(anchorKey)){for(anchorKey=document.getNode(anchorKey);selection;){anchorKey=
document.getNextText(anchorKey.key);if(!anchorKey)break;selection=document.hasVoidParent(anchorKey.key)}anchorKey&&change.collapseToStartOf(anchorKey)}transfer&&transfer.split("\n").forEach(function(line,i){0<i&&change.splitBlock();change.insertText(line)})}"fragment"==event&&change.insertFragment(fragment);"node"==event&&slate.Block.isBlock(node)&&change.insertBlock(node.regenerateKey()).removeNodeByKey(node.key);"node"==event&&slate.Inline.isInline(node)&&change.insertInline(node.regenerateKey()).removeNodeByKey(node.key);
document=document.getNode(value.focusKey);(document=findDOMNode(document,editor))&&document.dispatchEvent(new MouseEvent("mouseup",{view:editor,bubbles:!0,cancelable:!0}))}},onInput:function(event,change,editor){debug$5("onInput",{event:event});editor=getWindow(event.target);event=change.value;var anchorNode=editor.getSelection().anchorNode,point=findPoint(anchorNode,0,event);if(point){editor=event.document;event=event.selection;var node=editor.getDescendant(point.key),block=editor.getClosestBlock(node.key);
editor=node.getLeaves();var lastText=block.getLastText(),lastLeaf=editor.last(),start=0,end=0;editor=editor.find(function(r){start=end;end+=r.text.length;if(end>point.offset)return!0})||lastLeaf;block=editor.text;anchorNode=anchorNode.textContent;node=node==lastText;lastLeaf=editor==lastLeaf;lastText=anchorNode.charAt(anchorNode.length-1);node&&lastLeaf&&"\n"==lastText&&(anchorNode=anchorNode.slice(0,-1));anchorNode!=block&&(node=anchorNode.length-block.length,node=event.collapseToEnd().move(node),
event=event.moveAnchorTo(point.key,start).moveFocusTo(point.key,end),change.insertTextAtRange(event,anchorNode,editor.marks).select(node))}},onKeyDown:function(event,change,editor){debug$5("onKeyDown",{event:event});editor=change.value;if(Hotkeys.isSplitBlock(event)&&!slateDevEnvironment.IS_IOS)return editor.isInVoid?change.collapseToStartOfNextText():change.splitBlock();if(Hotkeys.isDeleteCharBackward(event)&&!slateDevEnvironment.IS_IOS)return change.deleteCharBackward();if(Hotkeys.isDeleteCharForward(event)&&
!slateDevEnvironment.IS_IOS)return change.deleteCharForward();if(Hotkeys.isDeleteLineBackward(event))return change.deleteLineBackward();if(Hotkeys.isDeleteLineForward(event))return change.deleteLineForward();if(Hotkeys.isDeleteWordBackward(event))return change.deleteWordBackward();if(Hotkeys.isDeleteWordForward(event))return change.deleteWordForward();if(Hotkeys.isRedo(event))return change.redo();if(Hotkeys.isUndo(event))return change.undo();if(Hotkeys.isCollapseLineBackward(event))return event.preventDefault(),
change.collapseLineBackward();if(Hotkeys.isCollapseLineForward(event))return event.preventDefault(),change.collapseLineForward();if(Hotkeys.isExtendLineBackward(event))return event.preventDefault(),change.extendLineBackward();if(Hotkeys.isExtendLineForward(event))return event.preventDefault(),change.extendLineForward();if(Hotkeys.isCollapseCharBackward(event)){var document=editor.document,isInVoid=editor.isInVoid,previousText=editor.previousText,startText=editor.startText;document=previousText&&document.hasVoidParent(previousText.key);
if(isInVoid||document||""==startText.text)return event.preventDefault(),change.collapseCharBackward()}if(Hotkeys.isCollapseCharForward(event)&&(document=editor.document,isInVoid=editor.isInVoid,previousText=editor.nextText,startText=editor.startText,document=previousText&&document.hasVoidParent(previousText.key),isInVoid||document||""==startText.text))return event.preventDefault(),change.collapseCharForward();if(Hotkeys.isExtendCharBackward(event)&&(document=editor.document,isInVoid=editor.isInVoid,
previousText=editor.previousText,startText=editor.startText,document=previousText&&document.hasVoidParent(previousText.key),isInVoid||document||""==startText.text))return event.preventDefault(),change.extendCharBackward();if(Hotkeys.isExtendCharForward(event)&&(startText=editor.document,isInVoid=editor.isInVoid,document=editor.nextText,editor=editor.startText,startText=document&&startText.hasVoidParent(document.key),isInVoid||startText||""==editor.text))return event.preventDefault(),change.extendCharForward()},
onPaste:function(event,change,editor){debug$5("onPaste",{event:event});event=getEventTransfer(event);editor=event.type;var fragment=event.fragment;event=event.text;"fragment"==editor&&change.insertFragment(fragment);"text"!=editor&&"html"!=editor||!event||(fragment=change.value,editor=fragment.startBlock,editor.isVoid||(fragment=fragment.document.getInsertMarksAtRange(fragment.selection),event=Plain.deserialize(event,{defaultBlock:editor,defaultMarks:fragment}).document,change.insertFragment(event)))},
onSelect:function(event,change,editor){debug$5("onSelect",{event:event});var window=getWindow(event.target);editor=change.value;event=editor.document;window=window.getSelection();if(window.rangeCount){if(editor=findRange(window,editor)){var _range=editor,anchorKey=_range.anchorKey,anchorOffset=_range.anchorOffset;window=_range.focusKey;_range=_range.focusOffset;var anchorText=event.getNode(anchorKey),focusText=event.getNode(window),anchorInline=event.getClosestInline(anchorKey),focusInline=event.getClosestInline(window),
focusBlock=event.getClosestBlock(window),anchorBlock=event.getClosestBlock(anchorKey);anchorBlock&&!anchorBlock.isVoid&&0==anchorOffset&&focusBlock&&focusBlock.isVoid&&0!=_range&&(editor=editor.set("focusOffset",0));anchorInline&&!anchorInline.isVoid&&anchorOffset==anchorText.text.length&&(anchorKey=event.getClosestBlock(anchorKey).getNextText(anchorKey))&&(editor=editor.moveAnchorTo(anchorKey.key,0));focusInline&&!focusInline.isVoid&&_range==focusText.text.length&&(window=event.getClosestBlock(window).getNextText(window))&&
(editor=editor.moveFocusTo(window.key,0));editor=editor.normalize(event);change.select(editor)}}else change.blur()},renderEditor:function(props,editor){var handlers=EVENT_HANDLERS.reduce(function(obj,handler){obj[handler]=editor[handler];return obj},{});return React.createElement(Content,_extends({},handlers,{autoCorrect:props.autoCorrect,className:props.className,children:props.children,editor:editor,readOnly:props.readOnly,role:props.role,spellCheck:props.spellCheck,style:props.style,tabIndex:props.tabIndex,
tagName:props.tagName}))},renderNode:function(props){var children=props.children,node=props.node;if("block"==node.object||"inline"==node.object)return React.createElement("block"==node.object?"div":"span",_extends({},props.attributes,{style:{position:"relative"}}),children)},renderPlaceholder:function(props){var editor=props.editor;props=props.node;if(editor.props.placeholder&&!editor.state.isComposing&&"block"==props.object&&slate.Text.isTextList(props.nodes)&&""==props.text&&!(1<editor.value.document.getBlocks().size))return React.createElement("span",
{contentEditable:!1,style:{pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333"}},editor.props.placeholder)}}}function BeforePlugin(){var activeElement=null,compositionCount=0,isComposing=!1,isCopying=!1,isDragging=!1;return{onBeforeInput:function(event,change,editor){if(editor.props.readOnly||(slateDevEnvironment.IS_IOS||slateDevEnvironment.IS_ANDROID)&&slateDevEnvironment.SUPPORTED_EVENTS.beforeinput)return!0;debug$6("onBeforeInput",{event:event})},
onBlur:function(event,change,editor){if(isCopying||editor.props.readOnly)return!0;var value=change.value;change=event.relatedTarget;var window=getWindow(event.target);if(activeElement==window.document.activeElement)return!0;if(change){editor=reactDom.findDOMNode(editor);if(change==editor||change.hasAttribute("data-slate-spacer"))return!0;value=findNode(change,value);if(editor.contains(change)&&value&&!value.isVoid)return!0}debug$6("onBlur",{event:event})},onChange:function(change,editor){change.value.schema!=
editor.schema&&change.setValue({schema:editor.schema},{save:!1}).normalize();debug$6("onChange")},onCompositionEnd:function(event,change,editor){var n=compositionCount;window.requestAnimationFrame(function(){compositionCount>n||(isComposing=!1,editor.state.isComposing&&editor.setState({isComposing:!1}))});debug$6("onCompositionEnd",{event:event})},onCompositionStart:function(event,change,editor){isComposing=!0;compositionCount++;editor.state.isComposing||editor.setState({isComposing:!0});debug$6("onCompositionStart",
{event:event})},onCopy:function(event,change,editor){change=getWindow(event.target);isCopying=!0;change.requestAnimationFrame(function(){return isCopying=!1});debug$6("onCopy",{event:event})},onCut:function(event,change,editor){if(editor.props.readOnly)return!0;change=getWindow(event.target);isCopying=!0;change.requestAnimationFrame(function(){return isCopying=!1});debug$6("onCut",{event:event})},onDragEnd:function(event,change,editor){isDragging=!1;debug$6("onDragEnd",{event:event})},onDragEnter:function(event,
change,editor){debug$6("onDragEnter",{event:event})},onDragExit:function(event,change,editor){debug$6("onDragExit",{event:event})},onDragLeave:function(event,change,editor){debug$6("onDragLeave",{event:event})},onDragOver:function(event,change,editor){findNode(event.target,editor.value).isVoid&&event.preventDefault();slateDevEnvironment.IS_IE&&event.preventDefault();isDragging||(isDragging=!0,slateDevEnvironment.IS_IE||(event.nativeEvent.dataTransfer.dropEffect="move"));debug$6("onDragOver",{event:event})},
onDragStart:function(event,change,editor){isDragging=!0;debug$6("onDragStart",{event:event})},onDrop:function(event,change,editor){if(editor.props.readOnly)return!0;event.preventDefault();debug$6("onDrop",{event:event})},onFocus:function(event,change,editor){if(isCopying||editor.props.readOnly)return!0;change=reactDom.findDOMNode(editor);activeElement=getWindow(event.target).document.activeElement;if(slateDevEnvironment.IS_FIREFOX&&event.target!=change)return change.focus(),!0;debug$6("onFocus",{event:event})},
onInput:function(event,change,editor){if(isComposing||change.value.isBlurred)return!0;debug$6("onInput",{event:event})},onKeyDown:function(event,change,editor){if(editor.props.readOnly)return!0;if(isComposing)return Hotkeys.isComposing(event)&&event.preventDefault(),!0;Hotkeys.isContentEditable(event)&&!slateDevEnvironment.IS_IOS&&event.preventDefault();debug$6("onKeyDown",{event:event})},onPaste:function(event,change,editor){if(editor.props.readOnly)return!0;event.preventDefault();debug$6("onPaste",
{event:event})},onSelect:function(event,change,editor){if(isCopying||isComposing||editor.props.readOnly)return!0;activeElement=getWindow(event.target).document.activeElement;debug$6("onSelect",{event:event})}}}Object.defineProperty(exports,"__esModule",{value:!0});process=_interopDefault(require("module$node_modules$debug$src$browser"));var React=_interopDefault(require("module$node_modules$react$index")),Types=_interopDefault(require("module$node_modules$prop_types$index"));global=_interopDefault(require("module$node_modules$slate_prop_types$lib$slate_prop_types"));
module=_interopDefault(require("module$node_modules$react_immutable_proptypes$dist$ImmutablePropTypes"));var immutable=require("module$node_modules$immutable$dist$immutable"),logger=_interopDefault(require("module$node_modules$slate_dev_logger$lib$slate_dev_logger")),slate=require("module$node_modules$slate$lib$slate"),getWindow=_interopDefault(require("module$node_modules$get_window$index")),isBackward=_interopDefault(require("module$node_modules$selection_is_backward$index")),slateDevEnvironment=
require("module$node_modules$slate_dev_environment$lib$slate_dev_environment"),throttle=_interopDefault(require("module$node_modules$lodash$throttle")),Base64=_interopDefault(require("module$node_modules$slate_base64_serializer$lib$slate_base64_serializer")),Plain=_interopDefault(require("module$node_modules$slate_plain_serializer$lib$slate_plain_serializer")),Hotkeys=_interopDefault(require("module$node_modules$slate_hotkeys$lib$slate_hotkeys")),reactDom=require("module$node_modules$react_dom$index"),
Portal=_interopDefault(require("module$node_modules$react_portal$build$portal")),EVENT_HANDLERS="onBeforeInput onBlur onClick onContextMenu onCompositionEnd onCompositionStart onCopy onCut onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onInput onFocus onKeyDown onKeyUp onPaste onSelect".split(" "),classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");},createClass=function(){function defineProperties(target,
props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){protoProps&&defineProperties(Constructor.prototype,protoProps);staticProps&&defineProperties(Constructor,staticProps);return Constructor}}(),defineProperty=function(obj,key,value){key in obj?Object.defineProperty(obj,
key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i],key;for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},inherits=function(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=
Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==typeof call&&"function"!==typeof call?self:call},slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;
if(Symbol.iterator in Object(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e;}}return _arr}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)},
PLUGIN_PROPS=[].concat(toConsumableArray(EVENT_HANDLERS),"decorateNode onChange renderEditor renderMark renderNode renderPlaceholder renderPortal schema validateNode".split(" ")),PARSER=/^([\w-]+)(?::(\d+))?$/,OffsetKey={parse:function(string){var matches=PARSER.exec(string);if(!matches)throw Error('Invalid offset key string "'+string+'".');string=slicedToArray(matches,3);return{key:string[1],index:parseInt(string[2],10)}},stringify:function(object){return object.key+":"+object.index}},debug=process("slate:leaves"),
Leaf$jscomp$0=function(_React$Component){function Leaf(){var _ref,_temp,_this,_ret;classCallCheck(this,Leaf);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,(_ref=Leaf.__proto__||Object.getPrototypeOf(Leaf)).call.apply(_ref,[this].concat(args))),_this),_initialiseProps.call(_this),_temp),possibleConstructorReturn(_this,_ret)}inherits(Leaf,_React$Component);createClass(Leaf,[{key:"shouldComponentUpdate",
value:function(props){return props.index!=this.props.index||props.marks!=this.props.marks||props.text!=this.props.text||props.parent!=this.props.parent?!0:!1}},{key:"render",value:function(){this.debug("render",this);var _props=this.props;_props=OffsetKey.stringify({key:_props.node.key,index:_props.index});return React.createElement("span",{"data-offset-key":_props},this.renderMarks())}},{key:"renderMarks",value:function(){var _props2=this.props,marks=_props2.marks,node=_props2.node,offset=_props2.offset,
text=_props2.text,editor=_props2.editor,stack=editor.stack;_props2=this.renderText();var attributes={"data-slate-leaf":!0};return marks.reduce(function(children,mark){return stack.find("renderMark",{editor:editor,mark:mark,marks:marks,node:node,offset:offset,text:text,children:children,attributes:attributes})||children},_props2)}},{key:"renderText",value:function(){var _props3=this.props,block=_props3.block,node=_props3.node,parent=_props3.parent,text=_props3.text,index=_props3.index;_props3=_props3.leaves;
if(parent.isVoid)return React.createElement("span",{"data-slate-zero-width":"z"},"​");if(""===text&&"block"===parent.object&&""===parent.text&&1===parent.nodes.size)return React.createElement("span",{"data-slate-zero-width":"n"},"​");if(""===text)return React.createElement("span",{"data-slate-zero-width":"z"},"​");block=block.getLastText();parent=text.charAt(text.length-1);index=index===_props3.size-1;return node===block&&index&&"\n"===parent?text+"\n":text}}]);return Leaf}(React.Component);Leaf$jscomp$0.propTypes=
{block:global.block.isRequired,editor:Types.object.isRequired,index:Types.number.isRequired,leaves:global.leaves.isRequired,marks:global.marks.isRequired,node:global.node.isRequired,offset:Types.number.isRequired,parent:global.node.isRequired,text:Types.string.isRequired};var _initialiseProps=function(){var _this2=this;this.debug=function(message){for(var _len2=arguments.length,args=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];debug.apply(void 0,[message,_this2.props.node.key+
"-"+_this2.props.index].concat(args))}},debug$1=process("slate:node"),Text$jscomp$0=function(_React$Component){function Text(){var _ref,_temp,_this,_ret;classCallCheck(this,Text);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,(_ref=Text.__proto__||Object.getPrototypeOf(Text)).call.apply(_ref,[this].concat(args))),_this),_initialiseProps$1.call(_this),_temp),possibleConstructorReturn(_this,_ret)}
inherits(Text,_React$Component);createClass(Text,[{key:"render",value:function(){var _this2=this;this.debug("render",this);var _props=this.props,node=_props.node,style=_props.style,document=_props.editor.value.document,key=node.key;_props=_props.decorations.filter(function(d){var startKey=d.startKey;d=d.endKey;return startKey==key||d==key?!0:startKey!==d&&document.areDescendantsSorted(startKey,key)?document.areDescendantsSorted(key,d):!1});var leaves=0===_props.size?node.getLeaves():node.getLeaves(_props),
offset=0;node=leaves.map(function(leaf,i){i=_this2.renderLeaf(leaves,leaf,i,offset);offset+=leaf.text.length;return i});return React.createElement("span",{"data-key":key,style:style},node)}}]);return Text}(React.Component);Text$jscomp$0.propTypes={block:global.block,decorations:module.list.isRequired,editor:Types.object.isRequired,node:global.node.isRequired,parent:global.node.isRequired,style:Types.object};Text$jscomp$0.defaultProps={style:null};var _initialiseProps$1=function(){var _this3=this;
this.debug=function(message){for(var _len2=arguments.length,args=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];debug$1.apply(void 0,[message,_this3.props.node.key+" (text)"].concat(args))};this.shouldComponentUpdate=function(nextProps){var p=_this3.props;if(nextProps.node!=p.node)return!0;if("block"==nextProps.parent.object){var pLast=p.parent.nodes.last(),nLast=nextProps.parent.nodes.last();if(p.node==pLast&&nextProps.node!=nLast)return!0}return nextProps.decorations.equals(p.decorations)?
!1:!0};this.renderLeaf=function(leaves,leaf,index,offset){var _props2=_this3.props,node=_props2.node;return React.createElement(Leaf$jscomp$0,{key:node.key+"-"+index,block:_props2.block,editor:_props2.editor,index:index,marks:leaf.marks,node:node,offset:offset,parent:_props2.parent,leaves:leaves,text:leaf.text})}},debug$2=process("slate:void"),Void=function(_React$Component){function Void(){var _ref,_temp,_this,_ret;classCallCheck(this,Void);for(var _len=arguments.length,args=Array(_len),_key=0;_key<
_len;_key++)args[_key]=arguments[_key];return _ret=(_temp=(_this=possibleConstructorReturn(this,(_ref=Void.__proto__||Object.getPrototypeOf(Void)).call.apply(_ref,[this].concat(args))),_this),_initialiseProps$2.call(_this),_temp),possibleConstructorReturn(_this,_ret)}inherits(Void,_React$Component);createClass(Void,[{key:"render",value:function(){var props=this.props,children=props.children,node=props.node,readOnly=props.readOnly,Tag="block"==node.object?"div":"span",spacer=React.createElement(Tag,
{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},this.renderText());children=React.createElement(Tag,{contentEditable:readOnly?null:!1},children);this.debug("render",{props:props});return React.createElement(Tag,{"data-slate-void":!0,"data-key":node.key,contentEditable:readOnly||"block"==node.object?null:!1},readOnly?null:spacer,children)}}]);return Void}(React.Component);Void.propTypes={block:global.block,children:Types.any.isRequired,editor:Types.object.isRequired,
node:global.node.isRequired,parent:global.node.isRequired,readOnly:Types.bool.isRequired};var _initialiseProps$2=function(){var _this2=this;this.debug=function(message){for(var _len2=arguments.length,args=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];_len2=_this2.props.node;debug$2.apply(void 0,[message,_len2.key+" ("+_len2.type+")"].concat(args))};this.renderText=function(){var _props=_this2.props,block=_props.block,decorations=_props.decorations,node=_props.node,
readOnly=_props.readOnly;_props=_props.editor;var child=node.getFirstText();return React.createElement(Text$jscomp$0,{block:"block"==node.object?node:block,decorations:decorations,editor:_props,key:child.key,node:child,parent:node,readOnly:readOnly})}},debug$3=process("slate:node"),Node$jscomp$0=function(_React$Component){function Node(){var _ref,_temp,_this,_ret;classCallCheck(this,Node);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _ret=
(_temp=(_this=possibleConstructorReturn(this,(_ref=Node.__proto__||Object.getPrototypeOf(Node)).call.apply(_ref,[this].concat(args))),_this),_initialiseProps$3.call(_this),_temp),possibleConstructorReturn(_this,_ret)}inherits(Node,_React$Component);createClass(Node,[{key:"render",value:function(){var _this2=this;this.debug("render",this);var _props=this.props,editor=_props.editor,isSelected=_props.isSelected,isFocused=_props.isFocused,node=_props.node,decorations=_props.decorations,parent=_props.parent,
readOnly=_props.readOnly;_props=editor.stack;var indexes=node.getSelectionIndexes(editor.value.selection,isSelected);decorations=decorations.concat(node.getDecorations(_props));var childrenDecorations=getChildrenDecorations(node,decorations),children=[];node.nodes.forEach(function(child,i){children.push(_this2.renderNode(child,!!indexes&&indexes.start<=i&&i<indexes.end,childrenDecorations[i]))});decorations={"data-key":node.key};"block"==node.object&&"block"!=node.nodes.first().object&&"rtl"==node.getTextDirection()&&
(decorations.dir="rtl");editor={key:node.key,editor:editor,isFocused:isFocused,isSelected:isSelected,node:node,parent:parent,readOnly:readOnly};if(isSelected=_props.find("renderPlaceholder",editor))isSelected=React.cloneElement(isSelected,{key:node.key+"-placeholder"}),children=[isSelected].concat(toConsumableArray(children));_props=_props.find("renderNode",_extends({},editor,{attributes:decorations,children:children}));return node.isVoid?React.createElement(Void,this.props,_props):_props}}]);return Node}(React.Component);
Node$jscomp$0.propTypes={block:global.block,decorations:module.list.isRequired,editor:Types.object.isRequired,isFocused:Types.bool.isRequired,isSelected:Types.bool.isRequired,node:global.node.isRequired,parent:global.node.isRequired,readOnly:Types.bool.isRequired};var _initialiseProps$3=function(){var _this3=this;this.debug=function(message){for(var _len2=arguments.length,args=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];_len2=_this3.props.node;debug$3.apply(void 0,
[message,_len2.key+" ("+_len2.type+")"].concat(args))};this.shouldComponentUpdate=function(nextProps){var props=_this3.props,shouldUpdate=props.editor.stack.find("shouldNodeComponentUpdate",props,nextProps);if(null!=shouldUpdate){if(shouldUpdate)return!0;!1===shouldUpdate&&logger.warn("Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return nextProps.readOnly!=
props.readOnly||nextProps.node!=props.node||nextProps.isSelected||props.isSelected||nextProps.isFocused||props.isFocused||!nextProps.decorations.equals(props.decorations)?!0:!1};this.renderNode=function(child,isSelected,decorations){var _props2=_this3.props,block=_props2.block,node=_props2.node;return React.createElement("text"==child.object?Text$jscomp$0:Node$jscomp$0,{block:"block"==node.object?node:block,decorations:decorations,editor:_props2.editor,isSelected:isSelected,isFocused:_props2.isFocused&&
isSelected,key:child.key,node:child,parent:node,readOnly:_props2.readOnly})}},OVERFLOWS=["auto","overlay","scroll"],IS_IOS_11=slateDevEnvironment.IS_IOS&&!!window.navigator.userAgent.match(/os 11_/i),debug$4=process("slate:content"),Content=function(_React$Component){function Content(props){classCallCheck(this,Content);var _this=possibleConstructorReturn(this,(Content.__proto__||Object.getPrototypeOf(Content)).call(this,props));_this.componentDidMount=function(){getWindow(_this.element).document.addEventListener("selectionchange",
_this.onNativeSelectionChange);(slateDevEnvironment.IS_IOS||slateDevEnvironment.IS_ANDROID)&&slateDevEnvironment.SUPPORTED_EVENTS.beforeinput&&_this.element.addEventListener("beforeinput",_this.onNativeBeforeInput);_this.updateSelection()};_this.componentDidUpdate=function(){_this.updateSelection()};_this.updateSelection=function(){var selection=_this.props.editor.value.selection,isBackward$$1=selection.isBackward,window=getWindow(_this.element),native=window.getSelection(),rangeCount=native.rangeCount,
anchorNode=native.anchorNode;if(rangeCount||!selection.isBlurred)if(selection.isBlurred)_this.isInEditor(anchorNode)&&(removeAllRanges(native),_this.element.blur(),debug$4("updateSelection",{selection:selection,native:native}));else if(!selection.isUnset)if(rangeCount=!!rangeCount&&native.getRangeAt(0),window=findDOMRange(selection,window)){anchorNode=window.startContainer;var startOffset=window.startOffset,endContainer=window.endContainer,endOffset=window.endOffset;rangeCount&&(anchorNode==rangeCount.startContainer&&
startOffset==rangeCount.startOffset&&endContainer==rangeCount.endContainer&&endOffset==rangeCount.endOffset||anchorNode==rangeCount.endContainer&&startOffset==rangeCount.endOffset&&endContainer==rangeCount.startContainer&&endOffset==rangeCount.startOffset)||(_this.tmp.isUpdatingSelection=!0,removeAllRanges(native),native.setBaseAndExtent?isBackward$$1?native.setBaseAndExtent(window.endContainer,window.endOffset,window.startContainer,window.startOffset):native.setBaseAndExtent(window.startContainer,
window.startOffset,window.endContainer,window.endOffset):native.addRange(window),scrollToSelection(native),setTimeout(function(){slateDevEnvironment.IS_FIREFOX&&_this.element&&_this.element.focus();_this.tmp.isUpdatingSelection=!1}),debug$4("updateSelection",{selection:selection,native:native}))}else logger.error("Unable to find a native DOM range from the current selection.",{selection:selection})};_this.ref=function(element){_this.element=element};_this.isInEditor=function(target){var element=_this.element;
target=3===target.nodeType?target.parentNode:target;return target.isContentEditable&&(target===element||target.closest("[data-slate-editor]")===element)};_this.onNativeBeforeInput=function(event){if(!_this.props.readOnly&&_this.isInEditor(event.target)){var _event$getTargetRange=event.getTargetRanges();if(_event$getTargetRange=slicedToArray(_event$getTargetRange,1)[0]){var editor=_this.props.editor;switch(event.inputType){case "deleteContentBackward":event.preventDefault();var range=findRange(_event$getTargetRange,
editor.value);editor.change(function(change){return change.deleteAtRange(range)});break;case "insertLineBreak":case "insertParagraph":event.preventDefault();var _range=findRange(_event$getTargetRange,editor.value);editor.change(function(change){change.value.isInVoid?change.collapseToStartOfNextText():change.splitBlockAtRange(_range)});break;case "insertReplacementText":case "insertText":var text=null==event.data?event.dataTransfer.getData("text/plain"):event.data;if(null!=text){event.preventDefault();
var value=editor.value,selection=value.selection,_range2=findRange(_event$getTargetRange,value);editor.change(function(change){change.insertTextAtRange(_range2,text,selection.marks);selection.marks&&value.document!=change.value.document&&change.select({marks:null})})}}}}};_this.onNativeSelectionChange=throttle(function(event){if(!_this.props.readOnly&&getWindow(event.target).document.activeElement===_this.element)_this.props.onSelect(event)},100);_this.renderNode=function(child,isSelected,decorations){var _this$props=
_this.props,editor=_this$props.editor,value=editor.value;return React.createElement(Node$jscomp$0,{block:null,editor:editor,decorations:decorations,isSelected:isSelected,isFocused:value.isFocused&&isSelected,key:child.key,node:child,parent:value.document,readOnly:_this$props.readOnly})};_this.tmp={};_this.tmp.isUpdatingSelection=!1;EVENT_HANDLERS.forEach(function(handler){_this[handler]=function(event){_this.onEvent(handler,event)}});return _this}inherits(Content,_React$Component);createClass(Content,
[{key:"componentWillUnmount",value:function(){var window=getWindow(this.element);window&&window.document.removeEventListener("selectionchange",this.onNativeSelectionChange);(slateDevEnvironment.IS_IOS||slateDevEnvironment.IS_ANDROID)&&slateDevEnvironment.SUPPORTED_EVENTS.beforeinput&&this.element.removeEventListener("beforeinput",this.onNativeBeforeInput)}},{key:"onEvent",value:function(handler,event){debug$4("onEvent",handler);if(!this.tmp.isUpdatingSelection||"onSelect"!=handler&&"onBlur"!=handler&&
"onFocus"!=handler){if("onSelect"==handler){var value=this.props.editor.value,selection=value.selection,native=getWindow(event.target).getSelection();if((value=findRange(native,value))&&value.equals(selection)){this.updateSelection();return}}if("onDragEnd"!=handler&&"onDragEnter"!=handler&&"onDragExit"!=handler&&"onDragLeave"!=handler&&"onDragOver"!=handler&&"onDragStart"!=handler&&"onDrop"!=handler||event.target.closest("[data-slate-editor]")===this.element)if("onBeforeInput"!=handler&&"onBlur"!=
handler&&"onCompositionEnd"!=handler&&"onCompositionStart"!=handler&&"onCopy"!=handler&&"onCut"!=handler&&"onFocus"!=handler&&"onInput"!=handler&&"onKeyDown"!=handler&&"onKeyUp"!=handler&&"onPaste"!=handler&&"onSelect"!=handler||this.isInEditor(event.target))this.props[handler](event)}}},{key:"render",value:function(){var _this2=this,props=this.props,className=props.className,readOnly=props.readOnly,editor=props.editor,tabIndex=props.tabIndex,role=props.role,spellCheck=props.spellCheck,value=editor.value,
stack=editor.stack;editor=props.tagName;var document=value.document,decorations=value.decorations,indexes=document.getSelectionIndexes(value.selection);value=document.getDecorations(stack).concat(decorations||[]);var childrenDecorations=getChildrenDecorations(document,value);value=document.nodes.toArray().map(function(child,i){return _this2.renderNode(child,!!indexes&&indexes.start<=i&&i<indexes.end,childrenDecorations[i])});stack=EVENT_HANDLERS.reduce(function(obj,handler){obj[handler]=_this2[handler];
return obj},{});decorations=_extends({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},readOnly?{}:{WebkitUserModify:"read-write-plaintext-only"},props.style);debug$4("render",{props:props});return React.createElement(editor,_extends({},stack,{"data-slate-editor":!0,ref:this.ref,"data-key":document.key,contentEditable:readOnly?null:!0,suppressContentEditableWarning:!0,className:className,onBlur:this.onBlur,onFocus:this.onFocus,onCompositionEnd:this.onCompositionEnd,onCompositionStart:this.onCompositionStart,
onCopy:this.onCopy,onCut:this.onCut,onDragEnd:this.onDragEnd,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDrop:this.onDrop,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onPaste:this.onPaste,onSelect:this.onSelect,autoCorrect:props.autoCorrect?"on":"off",spellCheck:spellCheck,style:decorations,role:readOnly?null:role||"textbox",tabIndex:tabIndex,"data-gramm":!1}),value,this.props.children)}}]);return Content}(React.Component);Content.propTypes={autoCorrect:Types.bool.isRequired,
children:Types.any.isRequired,className:Types.string,editor:Types.object.isRequired,readOnly:Types.bool.isRequired,role:Types.string,spellCheck:Types.bool.isRequired,style:Types.object,tabIndex:Types.number,tagName:Types.string};Content.defaultProps={style:{},tagName:"div"};EVENT_HANDLERS.forEach(function(handler){Content.propTypes[handler]=Types.func.isRequired});var TRANSFER_TYPES={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"},
FRAGMENT=TRANSFER_TYPES.FRAGMENT,HTML=TRANSFER_TYPES.HTML,TEXT=TRANSFER_TYPES.TEXT,FRAGMENT$1=TRANSFER_TYPES.FRAGMENT,HTML$1=TRANSFER_TYPES.HTML,NODE=TRANSFER_TYPES.NODE,RICH=TRANSFER_TYPES.RICH,TEXT$1=TRANSFER_TYPES.TEXT,FRAGMENT_MATCHER=/ data-slate-fragment="([^\s"]+)"/,TEXT$2=TRANSFER_TYPES.TEXT,debug$5=process("slate:after"),debug$6=process("slate:before"),debug$7=process("slate:editor");require=function(_React$Component){function Editor(props){classCallCheck(this,Editor);var _this=possibleConstructorReturn(this,
(Editor.__proto__||Object.getPrototypeOf(Editor)).call(this,props));_initialiseProps$4.call(_this);_this.state={};_this.tmp={};_this.tmp.updates=0;_this.tmp.resolves=0;var plugins=_this.resolvePlugins(props.plugins,props.schema),stack=slate.Stack.create({plugins:plugins});plugins=slate.Schema.create({plugins:plugins});_this.state.schema=plugins;_this.state.stack=stack;props=props.value.change();stack.run("onChange",props,_this);_this.queueChange(props);_this.state.value=props.value;EVENT_HANDLERS.forEach(function(handler){_this[handler]=
function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_this.onEvent.apply(_this,[handler].concat(args))}});return _this}inherits(Editor,_React$Component);createClass(Editor,[{key:"render",value:function(){debug$7("render",this);var children=this.stack.map("renderPortal",this.value,this).map(function(child,i){return React.createElement(Portal,{key:i,isOpened:!0},child)});children=_extends({},this.props,{children:children});return this.stack.render("renderEditor",
children,this)}},{key:"schema",get:function(){return this.state.schema}},{key:"stack",get:function(){return this.state.stack}},{key:"value",get:function(){return this.state.value}}]);return Editor}(React.Component);require.propTypes={autoCorrect:Types.bool,autoFocus:Types.bool,className:Types.string,onChange:Types.func,placeholder:Types.any,plugins:Types.array,readOnly:Types.bool,role:Types.string,schema:Types.object,spellCheck:Types.bool,style:Types.object,tabIndex:Types.number,value:global.value.isRequired};
require.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},plugins:[],readOnly:!1,schema:{},spellCheck:!0};var _initialiseProps$4=function(){var _this2=this;this.componentWillReceiveProps=function(props){var stack=_this2.stack;_this2.tmp.updates++;if(props.plugins!=_this2.props.plugins||props.schema!=_this2.props.schema){var schema=_this2.resolvePlugins(props.plugins,props.schema);stack=slate.Stack.create({plugins:schema});schema=slate.Schema.create({plugins:schema});_this2.setState({schema:schema,
stack:stack});_this2.tmp.resolves++;5<_this2.tmp.resolves&&_this2.tmp.resolves==_this2.tmp.updates&&logger.warn("A Slate \x3cEditor\x3e is re-resolving `props.plugins` or `props.schema` on each update, which leads to poor performance. This is often due to passing in a new `schema` or `plugins` prop with each render by declaring them inline in your render function. Do not do this!")}props=props.value.change();stack.run("onChange",props,_this2);_this2.queueChange(props);_this2.setState({value:props.value})};
this.componentDidMount=function(){_this2.flushChange();_this2.props.autoFocus&&_this2.focus()};this.componentDidUpdate=function(){_this2.flushChange()};this.queueChange=function(change){change.operations.size&&(debug$7("queueChange",{change:change}),_this2.tmp.change=change)};this.flushChange=function(){var change=_this2.tmp.change;change&&(debug$7("flushChange",{change:change}),delete _this2.tmp.change,_this2.props.onChange(change))};this.change=function(){var _value$change,change=(_value$change=
_this2.value.change()).call.apply(_value$change,arguments);_this2.onChange(change)};this.blur=function(){_this2.change(function(c){return c.blur()})};this.focus=function(){_this2.change(function(c){return c.focus()})};this.onEvent=function(handler,event){_this2.change(function(change){_this2.stack.run(handler,event,change,_this2)})};this.onChange=function(change){debug$7("onChange",{change:change});_this2.stack.run("onChange",change,_this2);var onChange=_this2.props.onChange;change.value!=_this2.value&&
onChange(change)};this.resolvePlugins=function(plugins,schema){var beforePlugin=BeforePlugin(),afterPlugin=AfterPlugin(),editorPlugin={schema:schema||{}};schema=function(_prop){if("onChange"==_prop||"schema"==_prop)return"continue";editorPlugin[_prop]=function(){var _props;return _this2.props[_prop]&&(_props=_this2.props)[_prop].apply(_props,arguments)}};var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=PLUGIN_PROPS[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=
(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0)schema(_step2.value)}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2;}}return[beforePlugin,editorPlugin].concat(toConsumableArray(plugins||[]),[afterPlugin])}};global=!0;process=!1;module=void 0;try{for(var _iterator=EVENT_HANDLERS[Symbol.iterator](),_step;!(global=(_step=_iterator.next()).done);global=
!0)require.propTypes[_step.value]=Types.func}catch(err){process=!0,module=err}finally{try{!global&&_iterator.return&&_iterator.return()}finally{if(process)throw module;}}_iterator={Editor:require,cloneFragment:cloneFragment,findDOMNode:findDOMNode,findDOMRange:findDOMRange,findNode:findNode,findRange:findRange,getEventRange:getEventRange,getEventTransfer:getEventTransfer,setEventTransfer:setEventTransfer,AfterPlugin:AfterPlugin,BeforePlugin:BeforePlugin};exports.Editor=require;exports.cloneFragment=
cloneFragment;exports.findDOMNode=findDOMNode;exports.findDOMRange=findDOMRange;exports.findNode=findNode;exports.findRange=findRange;exports.getEventRange=getEventRange;exports.getEventTransfer=getEventTransfer;exports.setEventTransfer=setEventTransfer;exports.AfterPlugin=AfterPlugin;exports.BeforePlugin=BeforePlugin;exports.default=_iterator}
//# sourceMappingURL=module$node_modules$slate_react$lib$slate_react.js.map
